# その他の設計の考え方

Webの設計指針の他にも設計に用いられる規約が存在します。
RESTとよく比較される`SOAP`を取り上げます。

## SOAP（Simple Object Access Protocol）

SOAPは、通信する上でのルールでリクエストおよびレスポンスともにコンピューターが読み取りやすいように作成されたデータでやり取りを行います。

#### 特徴

- 複雑な入力や出力があるサービス向け。
- 厳密なチェックなどが必要なサービス向け。

## RESTとSOAPの違い

RESTは**シンプルで簡単**ですが、SOAPは**高機能で複雑**です。

SOAPのメリットは、高機能で拡張性があることです。
デメリットは、書き方の自由度が高いため構成が複雑で、他のシステムとの連携が難しくなります。

RESTのメリットは、書き方が統一されているので、他のRESTのシステムと連携し機能を広げる事が可能です。
例えば自身の運営するWebサービスに簡単にGoogleMapなどの外部のサービスを組み込むことができるのは、GoogleMapというサービスがRESTの考え方に沿って提供されているおかげです。
デメリットは、構成のルールが決まっているので単体では拡張性に乏しいことです。

Webサービスで比較すると、
SOAPは複雑な処理を必要としたり、セキュリティの設定を必要とするようなサービスなどに向いています。
RESTは入力が少ない情報配信サービスや検索サービスなどに向いています。

![image](https://github.com/koharayuki/til/assets/132040884/323fea0f-2ec7-4911-8df3-5057227a117e)

## RESTを使うべき理由

### 理由①：簡単でシンプルな構造

RESTでは、全ての情報はリソース（URL）で表現され、それを4つのHTTPメソッド(GET,POST,PUT,DELETE)のみで使用するので、非常にシンプルな設計になります。

### 理由②：システムが単純なので、サーバー側の負荷が少ない

ステートレスなので、サーバーはクライアントの情報を保存しません。
クライアントからの全ての情報をはじめから送信するので、複数のリクエストが集中しても別々のサーバーで処理できるなど、サーバーの負担を減らしやすくなります。  


    
# 設計思想に沿った実装

## RESTful

RESTの考え方や原則に従って実装されていることを、RESTfulと呼びます。
RESTの構成やルールを守ることで、よりシンプルで連携のしやすいWebサービスの実装が可能になります。
普段私達が使用しているGoogleやTwitterもRESTfulなWebサービスの例です。

### RailsにおけるRESTful

PicTweet(tweetアプリ)を例にすると、http://localhost:3000/tweetsというURLがあります。
RESTの考え方だと、この1つのURLに対してHTTPメソッドのGETでアクセスすればツイート一覧を取得し、POSTでアクセスすればツイートの保存が行えます。

ただ、「GET」でアクセスしたとき、ツイートの一覧を取得したい場合と指定したツイートだけ取得したい場合もあります。
config/routes.rbにresourcesを記述して、ツイートに関するルーティングを設定した場合を見てみましょう。

```ruby:config/routes.rb
Rails.application.routes.draw do
 resources :tweets
end
```

この記述で設定されるルーティングは、以下の通りになります。

| URL                          | アクション   | HTTPメソッド	 | 役割	                       |
| ---------------------------- | --------- | ----------- | --------------------------- |
| /tweets(.:format)	           | index     | GET         |　ツイートの一覧を取得             |　
| /tweets/new(.:format)		     | new       | GET         |　新規ツイート画面を取得            |　
| /tweets(.:format)	           | create    | POST        |　新規ツイート画面から入力して保存    |　
| /tweets/:id(.:format)		     | show      | GET         |　指定したツイートの詳細画面を取得    |　
| /tweets/:id/edit(.:format)	 | edit      | GET         |　ツイートの編集画面を取得          |　
| /tweets/:id(.:format)		     | update    | PATCH/PUT	 |　編集画面から入力して更新         |  　
| /tweets/:id(.:format)		     | destroy   | DELETE      |　選択したツイートを削除            |　

一行目のHTTPメソッド「GET」＋`http://localhost:3000/tweets`でアクセスすると、**indexアクション**が呼び出され、ツイートの一覧が取得できます。

四行目のHTTPメソッド「GET」＋`http://localhost:3000/tweets/3`でアクセスすると、**showアクション**が呼び出され、指定したツイートの詳細が取得できます。

このようにresourcesを利用することで、一つのURL + HTTPメソッドに**一つのアクションが紐づく**ので、何に対してどんな操作を行っているのかがわかりやすくなります。



















