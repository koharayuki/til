# 生活を支えるIT技術

インターネットを通じて今日の天気を調べる、電車の時間を調べる、ECサイトで商品を注文するなど、これらはすべて`World Wide Web`という技術を用いて構築されています。

##  World Wide Web

World Wide Webは略してWebと呼ばれることが多いです。Web（World Wide Web）とは、簡単に言うと、コンピュータを使って文書と文書を結びつける仕組みのことです。

ここで言う文書とは、HTMLで記述された文書のことで、正式には「**ハイパーテキスト**」と呼びます。

ハイパーテキストは、別のハイパーテキストへの参照を埋め込むことができます。例えばaタグを使った文字リンクがそれにあたります。

この参照を「ハイパーリンク」と呼びます。私たちが普段「リンク」と呼ぶのは、この「**ハイパーリンク**」を指しています。

このハイパーリンクによって、ハイパーテキスト同士が世界中でクモの巣状に繋がっている様子からWorld Wide Web（世界に広がるクモの巣）と命名されました。

![image](https://github.com/koharayuki/til/assets/132040884/532dd1e7-e2c4-46c7-b2e9-76ddd4129c1e)

## インターネット

インターネットとは、世界中のコンピュータや情報機器がお互いに接続された環境のことです。

元々インターネットとWebは別の目的で開発されたものでした。

しかし、技術の発展に伴ってインターネット上でWebが使えるようになり、世界中のWebページが繋がるようになりました。

ECサイトなどのWebアプリケーションも、インターネット上でWebページを受け渡す（リクエスト/レスポンス）ことで成り立っています。  
  
  
# Webアプリケーションが利用できる仕組み

![image](https://github.com/koharayuki/til/assets/132040884/2ff472f7-81ea-44e7-849e-05491ec2a35d)

## 通信の仕組み


ネットワークに接続された機器同士は、あらかじめ決められた共通のルールや手順に沿って通信を行います。

この共通のルールや手順を「`プロトコル`」と呼びます。

特に現在のインターネット通信においてよく利用されている通信プロトコルに`TCP/IP`というものがあります。

## TCP/IP(Transmission Control Protocol/Internet Protocol)

インターネット通信において最も利用されている通信プロトコルの総称です。
正確に言うと、インターネット通信は複数のプロトコルから構成されるため、TCPやIPもそのうちの1つに過ぎません。

ただし、様々なプロトコルの中でもインターネット通信において中心的な役割を果たすのがTCPとIPであることから、総称してTCP/IPと呼ばれるようになりました。

先述したように、インターネット通信は複数のプロトコルから構成されており、以下の図のように4つの階層構造を持っています。

![image](https://github.com/koharayuki/til/assets/132040884/e1fa221a-292f-4b8f-a10a-1c320abc6ff4)

特に着目してもらいたいのが、一番上のアプリケーション層です。

アプリケーション層では、Webサイト、Webアプリケーション、メールソフトなどが通信を行うための共通のルールが定義されています。

このアプリケーション層の中で、WebサイトやWebアプリケーションで用いられるプロトコルが`HTTP`です。

##  HTTP（Hypertext Transfer Protocol）

Webページを表示するために、クライアントとサーバー間で行われるデータの送受信のプロトコルです。

正式名称は「Hyper Text Transfer Protocol」です。

HTTPを用いてリクエストとレスポンスが行われることはこれまでも学んで来ましたが、その詳細を紹介します。

リクエストには以下のように、「HTTPメソッド」「リクエスト先」などの情報が含まれています。

![image](https://github.com/koharayuki/til/assets/132040884/76c157e4-2cac-444d-85b6-b12485127602)

また、レスポンスには以下のように、「レスポンスの形式」「HTTPステータスコード」が含まれる他、実際にブラウザ上に表示されるWebページの情報（HTML）も含まれます。

![image](https://github.com/koharayuki/til/assets/132040884/7a9b1433-cbf6-4cc6-9c66-2328c4a3f9be)

![image](https://github.com/koharayuki/til/assets/132040884/b0c9b27c-a8ee-4a20-948a-0780619348f3)

このレスポンスの情報が変換され、ブラウザ上に表示されることでリクエスト/レスポンスの一連の流れは完了するのです。

## HTTPS（Hypertext Transfer Protocol Secure）

HTTPSとは「Hyper Text Transfer Protocol Secure」の略で、HTTP通信をより安全に行うためのプロトコルです。

HTTPとHTTPSの違いは「通信内容が暗号化されているか否か」です。

HTTPでは通信内容が暗号化されていないため、第三者が通信内容を見たり、編集することができてしまいます。

一方、HTTPSでは、通信内容が暗号化されます。そのためより安全に通信をすることが可能になります。  
  

# 特定のページにアクセスするための仕組み

私達は普段ある場所の位置を特定するために「住所」を使います。

それと同じようにインターネット上にも住所が存在します。この住所のことを「`IPアドレス`」と呼びます。

##  IPアドレス

IPアドレスとは、コンピュータやサーバーに設定されたインターネット上の住所のことを指します。

IPアドレスは数値とドットで表現されます。

![image](https://github.com/koharayuki/til/assets/132040884/82bfd63a-004e-48a0-acfd-534e58d36617)

インターネット上においてIPアドレスは世界中でたった1つです。この住所を指定することで、特定のコンピュータやサーバーと通信することができるようになります。

ここからは、特定のページのIPアドレスを調べ、そのIPアドレスを使ってページにアクセスできることを実際に確認しましょう。
今回は、Googleのトップページを例にします。
GoogleトップページのIPアドレスを調べるために、`hostコマンド`を使用しましょう。

###  host コマンド

hostコマンドとは、ページのURLの情報からIPアドレスを調べることができるコマンドです。

### IPアドレスを調べる

```ターミナル
% host google.com

# 実行結果に以下のような数字が現れます（xの部分が数字です）
google.com has address xxx.xxx.xxx.xx
```

## IPアドレスをChromeの検索欄に入力し、検索を実行

hostコマンドで調べたIPアドレスをGoogleの検索欄に入力し、検索を実行しましょう。

Googleのトップページにアクセスできたでしょうか？

このようにIPアドレスを入力することによって、通信したいサーバーを特定することができます。その結果、目的のサイトにアクセスすることができるわけです。

しかし、普段私たちはIPアドレスではなく、「https://〇〇〇.com」のようなURLを入力して、目的のサイトにアクセスしています。

これには「`ドメイン`」と「`DNS`」という概念が大きく関わっています。

## ドメイン

ドメインとは数値とドットからなるIPアドレスを「人間が覚えやすいように文字列に変換したもの」です。

`https://www.google.com`で言えば、ドメインは`google.com`に該当します。
先ほどの`hostコマンド`に続けて入力した値も、厳密にはドメインということになります。

![image](https://github.com/koharayuki/til/assets/132040884/e4cea8c0-9e97-437e-a782-6962a895876c)

つまり、IPアドレスとドメインを関連付けることで、検索欄にドメインを入力するだけで目的のサイトにアクセスすることができるようになります。

実際には入力されたドメインに関連づいたIPアドレスが裏側で呼ばれ、該当のサイトが表示されるようになっています。

そしてこのIPアドレスとドメインを結びつけるシステムのことを「`DNS`」と呼びます。

##  DNS（Domain Name System）

DNSとは「Domain Name System」の略であり、ドメインをIPアドレスに変換する仕組みのことを指します。

DNSの役割は電話帳に似ています。

電話を掛けるためには、電話番号が必要ですが、無機質な数字の羅列を大量に記憶するのは大変です。そのため、私たちは電話帳で名前と番号を紐付けて管理しています。

DNSも同様です。IPアドレスのまま管理するのは大変ですが、「google.com」のように意味のある文字列に変換すると人間にとって管理がしやすくなります。

そしてDNSのサービスを提供するサーバーを「`DNSサーバー`」と呼びます。

DNSサーバーは、ブラウザから入力されたドメインに対して、紐付けられたIPアドレスを返します。

![image](https://github.com/koharayuki/til/assets/132040884/8c9b7d8a-dd52-45a2-96ad-e1bcc79adf81)

以上をまとめると、ブラウザからドメインでアクセスする際には、以下のような処理が裏側で行われています。

- ブラウザからドメインでアクセス
- DNSサーバーにドメインを問い合わせる
- ドメインからIPアドレスを検索
- IPアドレスをブラウザに渡す
- ブラウザからIPアドレスでアクセス
- 該当サイトの表示

サーバの中ではたくさんのアプリケーションが同時に動いています。
IPアドレスだけでは、同じサーバーの中でもどのアプリケーションと通信するかを決められません。それを決めるのが`ポート番号`です。

## ポート番号

ポート番号とは、サーバーとアプリケーション間で通信する際に割り振られる番号です。
バスや電車はバス停やホームによって行先が違うように、アプリケーションにはそれぞれ自動もしくは手動でポート番号が割り振られます。
利用する側は、IPアドレスに加えてポート番号を指定することで意図したアプリケーションにリクエストを送ることができます。

Webサーバーをマンションに例えると、IPアドレスは住所の番地まで、ポート番号は部屋番号と考えるとわかりやすいです。

![image](https://github.com/koharayuki/til/assets/132040884/333f17a7-5ad3-43a1-b902-2457e93ef305)

