# オブジェクト指向

データと処理のまとまりごとに分けて実装する考えを、**オブジェクト指向**といいます。

アプリケーションを作成するときに、登場する役割ごとに分けて実装する方針のことを言います。RubyなどのWebアプリケーションに使用される言語の多くが、オブジェクト指向で実装する必要があります。

オブジェクト指向のメリットは以下の2点です。

- 役割ごとにオブジェクトを分けることで、実装がしやすくなる
- 役割ごとにオブジェクトを分けることで、あとからコードを改変するときも、他のオブジェクトに影響しなくなる（コードの改変がしやすくなる）
オブジェクトとは、Rubyにおけるクラスやインスタンス、その他の値のことを意味します。例えば、文字列や数値、配列やハッシュなど、これまで値と呼んできたものも全てオブジェクトです。
この他にも、Rubyでは様々な便利な特徴を持ったオブジェクトが用意されていて、組み込みライブラリという形やGemという形で使用できます。
クラスに含まれる値や処理のまとまり（= オブジェクト）を意識しながら、実装することがオブジェクト指向なのです。


# オブジェクト指向は誰によって決められるのか

オブジェクトの切り分けは、1つの正解におさまるのでしょうか？その答えとしては 「いいえ」 となります。オブジェクトの切り分けに「これ」という1つの正解はありません。これがオブジェクト指向の難しいところになります。

オブジェクト指向はあくまで設計思想の1つです。

- オブジェクトを綺麗に切り分けなくてもとりあえず動くアプリケーションは完成してしまった
- 最初のアプリケーション設計から仕様変更が生じて、オブジェクトの切り分けを見直す必要がでてきてしまった
- AさんとBさんの考えるアプリケーション設計が異なる
ということはよくあります。

それでも、オブジェクト指向を意識しないアプリケーションには、以下のようなデメリットがあります。

- オブジェクト内にさまざまな役割が入り組んでいて、どこに何があるのかわからない
- 1つの機能を変えた途端、その変更とは関係のないはずの機能が動かなくなってしまった
このような問題が生じるコードは、複雑に絡み合うことから「**スパゲッティコード**」と呼ばれます。スパゲッティコードは、開発現場においては非常に大きな問題です。
したがって、オブジェクト指向という「正解のない問題」に、エンジニアは挑み続ける必要がありますし、エンジニアを目指す人はオブジェクト指向を意識した実装ができるようになる必要があるのです。


# Ruby on Railsにおけるオブジェクト指向

「クラス名のファイルに、そのクラスの内容を記述する」点は、Ruby on Railsではモデルのファイルでよく見られる光景です。

![image](https://github.com/koharayuki/til/assets/132040884/599c0056-b7c3-4f33-8696-033009663cad)

このように、Ruby on Railsのアプリケーションも、さまざまなオブジェクトによって構成されています。

PicTweet(tweetアプリケーション)を例に出せば、モデルというオブジェクトの中に、Userモデル・Tweetモデル・Commentモデルがあります。

![image](https://github.com/koharayuki/til/assets/132040884/5e2389bd-9cc9-4ad6-aaa5-3ab1f45e0850)

オブジェクトとして存在することは、オブジェクト指向に従えば 「**ある役割**」 をそれぞれ持っているはずです。
たとえば、Ruby on Railsにおけるモデルは「バリデーションを設定する」「アソシエーションを定義する」という責任があります。

※Ruby on Railsのモデルで単一責任の原則を達成するために、バリデーションを別クラスに切り出すことも可能です。
