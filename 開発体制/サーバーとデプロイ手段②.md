# デプロイの手段

デプロイの手段である以下3つを紹介します。

- カナリアリリース
- ブルーグリーンデプロイメント
- イミュータブルデプロイメント

## カナリアリリース

一部のユーザーにのみ新機能の公開を行い、新しいバージョンにバグなどがないかを検証する手法です。
もし新しい機能に不具合があったとしても、サービス全体には影響を及ぼさずに済む、というメリットがあります。

![image](https://github.com/koharayuki/til/assets/132040884/07203780-796b-4850-9151-979092153a89)

## ブルーグリーンデプロイメント

ブルーグリーンデプロイメントとは、仮想サーバーを用い、2つの本番環境を用意します。それぞれバージョンを設定することができる「デプロイの運用方法」です。

サーバーAは、新しいバージョンを反映させた環境で「グリーン」とします。サーバーBは、古いバージョンの環境で「ブルー」とします。
万が一、サーバーAの環境の「グリーン」に問題が起こった場合は、サーバーBの環境の「ブルー」にリクエストの向きを戻す事で、容易にロールバックを行う事ができます。

デプロイ後、「ブルー」と「グリーン」の位置づけは変わり、同じ工程を行うことで継続的なデプロイが出来ます。
デメリットとして、デプロイを行わない期間は新しいバージョンを反映させる「グリーン」の運用コストが発生しますが、継続的にデプロイを行えるメリットが大きいと考えられます。

![image](https://github.com/koharayuki/til/assets/132040884/83d03fa6-6b36-4a25-89cb-c2ad5127192c)

## イミュータブルデプロイメント

コンテナ技術を用い、常に変更を行わない環境を構築することで、デプロイ時に新しい環境に切り替える手法です。
ブルーグリーンデプロイメントと似ていますが、「古い環境は削除する」という点が大きな違いです。

コンテナの技術を用いることで、環境自体を新しく構築する作業が容易になり、誕生したデプロイ手法です。古い環境は削除するため、運用コストを抑えることが出来ます。

![image](https://github.com/koharayuki/til/assets/132040884/92231c2e-c873-46d4-9c1f-9ea5cf3c285f)



















