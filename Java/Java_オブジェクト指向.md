# オブジェクト指向のイメージをつかもう

Javaでコードを書くためには、オブジェクト指向についての理解が必要です。

しかし、オブジェクト指向の全体を理解することは難しく、理解するためには学習コストがかかります。

1.オブジェクトがどのようなものか、イメージをつかむこと

2.オブジェクトの具体的な使い方を理解すること

## オブジェクト指向でない言語と比べてみよう

オブジェクト指向を理解するために、オブジェクト指向ではない言語と比べてみましょう。

オブジェクト指向が生まれる前に、「手続き型言語」に分類されるプログラミング言語がありました。

手続き型言語では、コンピュータに実行させたい処理を基本的には上から順に記述します。

![image](https://github.com/koharayuki/til/assets/132040884/15e451a9-7d72-40e2-a91b-8636d30b6745)

ただ、順に処理を羅列するだけでは、コード量が増えた場合に可読性が下がってしまいます。

そのために「関数」があります。関数を利用することで、複数の処理を１つのグループにまとめ、そのグループに名前をつけることができます。

Rubyの学習で、以下のコードを扱いました。

```ruby
def mixer(fruit)
  puts "#{fruit}を細かく砕く"
  return "#{fruit}ジュース"
end

puts "フルーツを入力してください"
input = gets.chomp

puts mixer(input)
```

このように関数を利用しつつ、上から順にコードを記述していくのが手続き型言語のスタイルです。

（ただし、Rubyは手続き型の言語ではありません。イメージをつかむため、Rubyのコードを利用します）

手続き型はこのようなシンプルな仕組みのため、習得のための学習コストが低いメリットがあります。

しかし、手続き型言語の限界は、コード量が多くなると管理しきれなくなることです。

例えば、WindowsやLinuxなどのOSは、コードが数千万行あると言われています。そのような膨大なプログラムでは、関数というグループ化の仕組みだけで開発や保守を行うのは困難です。

どこにどのような処理が記述されているのか、人間の脳では把握することができないでしょう。

それを解消するために生まれたのがオブジェクト指向と呼ばれる考え方です。

## オブジェクト指向言語とは

オブジェクト指向では、オブジェクトと呼ばれるパーツを連携させることでアプリなどの機能を実現します。

手続き型では、処理をまとめるために関数という仕組みがあります。オブジェクト指向では、さらに複数の関数をまとめて１つのオブジェクトとして扱います。

このオブジェクトを利用することで、手続き型とどのような違いが生まれるのか、もう少し詳しくみていきましょう。

## 手続き型とオブジェクト指向の違いを理解しよう

手続き型とオブジェクト指向の違いをイメージできるよう、ここからは現実世界での例を用いて比喩的に解説します。

「カレーをつくる」という作業を例に、手続き型とオブジェクト指向の発想の違いを確認しましょう。

手続き型的アプローチは、1人でカレーを作るときに適しています。

以下のように、カレー作りに必要な手順を紙にまとめ、上から順に取り組んでいくイメージです。

![image](https://github.com/koharayuki/til/assets/132040884/c92a6ccd-9a19-450d-bc87-f866ea13557c)

作るカレーの量が少ない場合は、このような手順が効率的です。

それに対して、オブジェクト指向はレストランなどで大量にカレーを作る際に適した発想です。

例えば10人でカレーを作る場合、以下のように全員が同じ手順を踏んでいくことは効率的ではありません。

- 10人で食材を買いに行く
- 10人で野菜を洗う
- 10人で野菜を切る

通常は、以下のように買い出しに行くチームや野菜担当のチームなどに分かれて、それぞれの作業を行うのではないでしょうか。

また、必要な材料や道具をチームごとに配っておけば効率よく作業ができます。

![image](https://github.com/koharayuki/til/assets/132040884/5873414c-5c2b-4877-852a-b12eb4695698)

このカレー作りでの「チーム」に当たるのが、オブジェクト指向における「オブジェクト」です。

役割ごとに分けたチームが連携してカレーを作るように、機能ごとに分けたオブジェクトを連携させてアプリを開発するのがオブジェクト指向の考え方です。


# オブジェクトの特徴を理解しよう

オブジェクトとは、現実世界におけるチームのようなものだということを確認しました。

続けて、このオブジェクトの特徴についてもう少し詳しくみていきましょう。

オブジェクト指向におけるオブジェクトについて、必ず押さえておきたい特徴が３つあります。

1.１つのオブジェクトには、１つの責務がある
2.オブジェクトにはメソッドと変数が含まれる
3.他にオブジェクトに公開するメソッドや変数は必要最低限のもののみとする

これらの意味について、カレー作りの例と比べながら確認しましょう。

### 1.１つのオブジェクトには、１つの責務がある

カレー作りの例では、チームごとに役割を分けることで効率的に作業できることを確認しました。

![image](https://github.com/koharayuki/til/assets/132040884/c710c01e-f06e-4c44-afb1-7548ee609359)

それと同じように、１つのオブジェクトには１つの機能を持たせるよう設計するのが良いと言われています。

![image](https://github.com/koharayuki/til/assets/132040884/4d43a4a3-a39b-4b5d-9c03-1f26dc2b6caa)

これを、単一責任の原則といいます。

例えば、フォームからの投稿機能を実装する場合は、以下のようなオブジェクトを作成し、それらを連携させることで機能を実現できるようにします。

- データの入れ物となるオブジェクト
- フォームからデータを受け取るオブジェクト
- SQLを発行するオブジェクト
- 上記のオブジェクトをコントロールするオブジェクト

### 2.オブジェクトにはメソッドと変数が含まれる

カレー作りの例では、各チームにメンバーが配置され、必要な道具や材料が割り振られていました。

![image](https://github.com/koharayuki/til/assets/132040884/90ec6ab0-bb24-4ae5-a34f-9749caa0243d)

オブジェクトは「メソッド」と「変数」をひとまとめにしたものです。

メソッドは、チームに配置されたメンバーのようなものです。メンバーが野菜を加工するように、メソッドはオブジェクト内の変数の変更や参照といった処理を担います。

![image](https://github.com/koharayuki/til/assets/132040884/53cdea44-7abc-46de-8d75-e03093f61812)

### 3.他のオブジェクトに公開するメソッドや変数は必要最低限のもののみとする

カレー作りでも、初めに決められた仕事以外を手伝うと、たとえそれが善意であっても返って混乱することがあります。

カレー作りで、じゃがいもの皮むきを追加で10個行う必要が出たとします。その場合、別チームのメンバーが代わりに手伝うことはしません。

![image](https://github.com/koharayuki/til/assets/132040884/25511dc7-722d-4dcd-8ffd-793f34b3bb63)

混乱を防ぐためには、別チームのタスクを直接行うのではなく、そのチームの担当にタスクを依頼する仕組みにする必要があります。

必ず、野菜担当に「追加で１０個皮をむいてほしい」ということを伝えるのみで、実際の皮むきは担当者が行います。


![image](https://github.com/koharayuki/til/assets/132040884/6c990560-6c48-434c-8ecc-522711470844)

それと同じように、オブジェクト指向ではあるメソッドが、別のオブジェクトの変数に直接アクセスしないよう設計します。

![image](https://github.com/koharayuki/til/assets/132040884/445c8bf5-ce70-4c28-8c9b-a0966b955850)

たとえば、別のオブジェクトに含まれる変数を取得したい場合は、相手方のオブジェクトに含まれる「取得用のメソッド」に対して、データ取得を依頼する形になります。

このように、オブジェクトごとにメソッドや変数を分離して、他オブジェクトに必要以上に干渉しないようにする考え方を「カプセル化」といいます。

なお、このカプセル化を含む以下の３点がオブジェクト指向の特徴だと言われています。

- カプセル化
- 継承
- ポリモーフィズム

ただし、継承とポリモーフィズムについてはこのカリキュラムのアプリ開発で使用しないため解説は割愛しています。

