# なぜ読みやすいコードを書くのか

読みやすいコードを書くメリットは主に以下の3点が挙げられます。

- 個人・組織の生産性が上がる
- 保守性が上がる
- 柔軟な開発体制が構築できる

これらを実現するために、機能の実装中もしくは実装後に、エンジニアは**リファクタリング**と呼ばれるソースコードの書き換えを行うのが一般的です。

## リファクタリング

リファクタリングとは、実装した機能に影響を与えずに、ソースコードを読みやすい状態に改善することです。
リファクタリングをすることで、開発に携わるすべての人にとって、実装されているコードの理解や修正が容易になります。

上記の利点を感じてもらうために、一度読みやすいコードと読みにくいコードの見比べをしましょう。

### どちらのコードが読みやすいか考える

以下のAとBのコードを読み、どちらのコードが読みやすいコードなのでしょうか？（AとBの処理内容は同じです）

### `A`

```JavaScript
// yearが閏年かどうかを判定する関数
const getYear = (year) => {
  // yearが4で割り切れる（year % 4 == 0）場合
  if (year % 4 == 0){ 
    // yearが100で割り切れ、なおかつ（&&）、400で割り切れない（year % 400 != 0）場合
    if (year % 100 == 0 && year % 400 != 0){
      console.log(`${year}年は閏年ではありません`);
    } else {
      console.log(`${year}年は閏年です`);
    };
  }else {
    console.log(`${year}年は閏年ではありません`);
  };
};
```

### `B`

```JavaScript
// yearが閏年かどうかを判定する関数
const isLeapYear? = (year) => {
  if (year % 400 == 0) {
      // 400で割り切れる年は閏年
      return true;
  };
  if (year % 100 == 0) {
      // 400で割り切れず、100で割り切れる年は平年
      return false;
  };
  if (year % 4 == 0) {
      // 400でも100でも割り切れず、4で割り切れる年は閏年
      return true;
  };

  // それ以外は平年
  return false;
};

if (isLeapYear?(year)) {
  console.log(`${year}年は閏年です`);
} else {
  console.log(`${year}年は閏年ではありません`);
};
```

読みやすいコードはBです。では、なぜAよりBの方が読みやすいのでしょうか。
主な要因として以下の3点が挙げられます。

- 変数名（関数名）が他者を考慮した命名になっている
- 複雑なロジックがなく、読みやすい
- コメントが記載されており、全体像を把握しながらコードを読むことができる

では、上記の「読みやすいとされる理由」の詳細を順番に確認します。


# 変数と関数の命名

「自分以外の人を考慮した命名をすること」を徹底することで、自分自身はもちろん、一緒に開発しているチームメンバーの負担を大幅に減らすことができます。

## わかりやすい変数名

変数を命名する時は、**抽象的な名前は避けて、具体的な名前をつけること**を意識しましょう。
抽象的な名前にすると、読み手は変数に代入されている値の役割を把握できず、理解するのに多くの時間を要してしまうためです。

悪い例として以下のようなものがあります。

```JavaScript
// oneという名前からは1の役割が把握できない
const one = 1;
```

しかし、以下のように意味のある名前にすることで、役割が推測できます。

```JavaScript
const userId = 1;
```

このように記述することで、1という値はユーザーのidであることが把握できます。

## わかりやすい関数名

以下のような関数を定義した場合を想定しましょう。

```JavaScript
const add = () => {
  // 処理
};
```

addという関数名では何をadd（追加）するのか読み取ることができません。しかし、以下のように具体的な命名をすることで、関数名から処理の内容を推測できます。

```JavaScript
const addTask = () => {
  // 処理
};
```

※ **関数名は動詞+名詞を意識しましょう**。

## ロジックの単純化

実装の便宜上、ネストされているコードの中にネストの記述をする場合があります。しかし、この書き方をしてしまうと、非常に読みづらくなってしまいます。
そこで、以下のコードを例にして順を追ってリファクタリングを行います。

```JavaScript
const getYear = (year) => {
  if (year % 4 == 0){ 
    if (year % 100 == 0 && year % 400 != 0){
      console.log(`${year}年は閏年ではありません`);
    } else {
      console.log(`${year}年は閏年です`);
    };
  }else {
    console.log(`${year}年は閏年ではありません`);
  };
};
```

コードが読みにくくなってしまう要因として、以下のようにif文の中にif文を記述してしまう場合が挙げられます。

```JavaScript
if (year % 4 == 0){ 
  if (year % 100 == 0 && year % 400 != 0){
    console.log(`${year}年は閏年ではありません`);
  } else {
    console.log(`${year}年は閏年です`);
  };
}else {
  console.log(`${year}年は閏年ではありません`);
};
```

