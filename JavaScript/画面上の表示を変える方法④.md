# デバッグして条件分岐の処理を確認する

条件分岐の処理の挙動を確認します。確認のために**debugger**というメソッドを用いてデバッグを行います。

## debugger

debuggerを用いることで、ソースコードに処理を一旦停止させる場所を指定することができます。指定したブレークポイントまで処理が進むことで、処理を一時的に停止することができます。
処理が停止している状態で、特定の変数の値を確認したり、1行だけ処理を進めたりなど、幅広いデバッグが可能となります。

### プルダウンメニューが表示される挙動をデバッグする

<index.js>
```javascript
window.addEventListener('load', function(){

  const pullDownButton = document.getElementById("lists")
  const pullDownParents = document.getElementById("pull-down")

  pullDownButton.addEventListener('mouseover', function(){
    this.setAttribute("style", "background-color:#FFBEDA;")
  })

  pullDownButton.addEventListener('mouseout', function(){
    this.removeAttribute("style")
  })

  pullDownButton.addEventListener('click', function() {
    debugger
    // プルダウンメニューの表示と非表示の設定
    if (pullDownParents.getAttribute("style") == "display:block;") {
      pullDownParents.removeAttribute("style")
    } else {
      pullDownParents.setAttribute("style", "display:block;")
    }
  })
})
```

そして、コンソールを開いた状態で、プルダウンメニューを表示するための要素をクリックします。

すると、以下のように挙動が一時停止状態になります。

![image](https://github.com/koharayuki/til/assets/132040884/63520240-2d76-45d2-a701-ece9a3a935ec)

この状態で、実行されている処理の詳細を確認することができます。

デベロッパーツールのタブを「Console」に切り替え、コンソールに以下のように記述し、実行します。

<コンソール>
```javascript
pullDownParents.getAttribute("style") == "display:block;"
```

実行するとfalseと出力されました。
つまりpullDownParentsのHTML要素の`<ul class="hidden" id="pull-down"> ...</ul>`に`style: display:block;`が指定されていないことが確認できます。

![image](https://github.com/koharayuki/til/assets/132040884/a7dc43b2-8c3c-455e-b137-fefc1e52ce93)

その結果、elseの処理が実行され、以下のようにインラインスタイルが指定されます。

#### before(setAttributeメソッド実行前)

<index.html>
```html
<ul class="show-lists hidden" id="pull-down">
  <li>リスト1</li>
  <li>リスト2</li>
  <li>リスト3</li>
  <li>リスト4</li>
</ul>
```

#### after(setAttributeメソッド実行後)

<index.html>
```html
<ul class=" show-lists hidden" id="pull-down" style="display:block;">
  <li>リスト1</li>
  <li>リスト2</li>
  <li>リスト3</li>
  <li>リスト4</li>
</ul>
```

ブラウザ上で停止している状態で、上部にある再生ボタンのような形をした青色のボタンをクリックすることで、debuggerによる停止状態を解除することができます。  
   
   
# 選択したリストを表示する

![image](https://github.com/koharayuki/til/assets/132040884/96c76738-72be-416b-88de-4bfd46062461)

このような機能を実装するためには、プルダウンメニューに存在する複数のプルダウンメニューリストの中で、それぞれ任意の要素を取得する必要があります。

任意の要素の取得を実現するために、まずはイベントを発火させるHTML要素を取得します。

### イベント発火させる複数のプルダウンメニューのリストのHTML要素を取得する。

イベント発火させる要素にclassを指定します。

<index.html>
```html
<header>
  <div class="heading">
    <h1 class="title">TECH HEADER</h1>
  </div>
  <div class="navbar">
    <ul class="nav-lists">
      <li class="list-status">
        現在のリスト；
        <span>選択されていません</span>
      </li>
      <li class="background-red" id="lists">リスト
      </li>
      <li>カリキュラム変更</li>
    </ul>
    <ul class="show-lists hidden" id="pull-down">
      <li class="pull-down-list">リスト1</li>
      <li class="pull-down-list">リスト2</li>
      <li class="pull-down-list">リスト3</li>
      <li class="pull-down-list">リスト4</li>
    </ul>
  </div>
</header>
```

classを指定した要素を取得します。

<index.js>
```javascript
window.addEventListener('load', function(){

  const pullDownButton = document.getElementById("lists")
  const pullDownParents = document.getElementById("pull-down")
  const pullDownChild = document.querySelectorAll(".pull-down-list")

  pullDownButton.addEventListener('mouseover', function(){
    this.setAttribute("style", "background-color:#FFBEDA;")
  })

  pullDownButton.addEventListener('mouseout', function(){
    this.removeAttribute("style")
  })

  pullDownButton.addEventListener('click', function() {
    // プルダウンメニューの表示と非表示の設定
    if (pullDownParents.getAttribute("style") == "display:block;") {
      pullDownParents.removeAttribute("style")
    } else {
      pullDownParents.setAttribute("style", "display:block;")
    }
  })
})
```

選択したリストを表示するために、この後forEach関数を用いて実装します。したがって、querySelectorAllメソッドを使ってHTML要素を取得します。

pullDownChildは以下のように配列オブジェクトとなっています。配列の中に取得した4つのHTML要素が格納されています。

<querySelectorAllメソッドの実行結果>
```javascript
document.querySelectorAll(".pull-down-list")
// => NodeList(4) [li.pull-down-list, li.pull-down-list, li.pull-down-list, li.pull-down-list]
```

