# ソフトウェアに起こり得る問題点

Webアプリケーションに欠陥や仕様上の問題点があると、開発者と利用者それぞれに、さまざまな被害が生じます。
このような、セキュリティを脅かす欠陥や仕様上の問題を`脆弱性`と言います。

## 脆弱性

脆弱性とは、アプリケーションなどにおいて、セキュリティの弱点を作り出す仕様上の問題点のことをいいます。
つまり、「Webアプリケーション上で悪意のある者に攻撃を仕掛けられる際の弱点」と言い換えることができます。

## 脆弱性によってもたらされる被害

脆弱性がアプリケーション内に存在することによって、以下のような被害が想定されます。

- 個人情報を勝手に閲覧される
- Webページの内容が改ざんされる
- Webページ自体が利用不可能になる
- 
このような問題が起きてしまうと利用者へ大きな被害を与えてしまい、公開したWebページは社会的な信用を失ってしまいます。
そのような事態を防ぐためにも、脆弱性対策は必須と言えるでしょう。

## セキュリティ攻撃による具体例

具体例としては以下の4つが挙げられます。

### JavaScriptによるセキュリティ攻撃

JavaScriptの仕組みを用いた、非常にポピュラーな攻撃方法の一つです。

### セッションを用いたセキュリティ攻撃

先述のJavaScriptによるセキュリティ攻撃を用いて、そのユーザーのログイン情報を盗み出す攻撃です。

### 不正なリクエストを行うセキュリティ攻撃

サーバー側に不正なリクエストを行い、データを改ざんする攻撃手法です。

### SQLによるセキュリティ攻撃

サーバーサイドでSQLを用いてデータを取得/登録する際に、セキュリティ不備を意図的に利用する攻撃手法です。  



## JavaScriptによるセキュリティ攻撃

JavaScriptはクライアントサイドで動くプログラミング言語です。
すなわち、何らかの方法で悪意のあるJavaScriptのプログラムを、ユーザーがWebアプリケーションを表示したブラウザに埋め込めば、ユーザーにそのプログラムを実行させることができてしまいます。

![image](https://github.com/koharayuki/til/assets/132040884/f32bfef2-6b7c-449b-8e7b-e81f9e49c6cb)

JavaScriptを埋め込まれてしまうような攻撃を許すWebアプリケーションは、この攻撃に対する脆弱性があると言えます。
そして、悪意のあるプログラムを脆弱性のあるWebアプリケーション上で実行させるような、JavaScriptを利用した攻撃方法を`XSS`と言います。

## XSS（Cross Site Scripting）

XSSとは、攻撃者が脆弱性のあるWebアプリケーション上に、悪意のあるJavaScriptのプログラム（スクリプト）を埋め込み、そのサイトの利用者を攻撃する手法です。

「スクリプトを埋め込む」とは、ユーザーがブラウザ上で表示するHTML中に、JavaScriptのプログラムを埋め込むことを言います。例えば、以下のようなHTMLがあったとします。

```index.html
<!DOCTYPE html>
<html>
<div>
  こんにちは
</div>
</html>
```

この状態では、ブラウザでは以下のような表示になるはずです。

![image](https://github.com/koharayuki/til/assets/132040884/5b60ed43-9fcd-49c6-958e-71aa0bdc3e93)

一方、何らかの方法で以下のようにJavaScriptを、表示するHTML中に埋め込まれてしまったとします。

```index.html:不正なスクリプトが埋め込まれたHTML
<!DOCTYPE html>
<html>
<div>
  こんにちは
  <script>alert("不正なスクリプトです")</script>
</div>
</html>
```

すると、このようにブラウザを開いた瞬間にアラートが表示されるようになりました。

![image](https://github.com/koharayuki/til/assets/132040884/fbe97fe0-efe1-47cc-a979-92f40941374d)

このように、悪意のあるスクリプトをWebアプリケーションを表示したときに実行させることをゴールとした攻撃がXSSです。
「クロスサイトスクリプティング」のうち、**スクリプトを埋め込んで実行させることが「スクリプティング」に該当します**。

今回は例として、アラートを表示するスクリプトを埋め込みました。しかし、**実際はユーザーの個人情報などを、悪意のある人のサーバーなどへ送付するスクリプトが埋め込まれることが多いです**。




















